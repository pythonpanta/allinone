<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="prism.css">
  <script src="prism.js"></script>
  <title>Django Note-by Amrit Panta</title>
</head>

<body>
  <header>
    <a >Djnago Note-by Amrit Panta</a>
    <div class="set">
      <!-- <a href="#seta">Set-A</a> -->
      <!-- <a href="#setb" class="set">Set-B</a> -->
    </div>
  </header>
  <div id="seta">
  <h1></h1>
<div  class="container">

    <div class="task">
      <h3></h3>
      <pre class='language-python'>
<code>
#In Django Media files are the files uploaded by users on the system
# Base url to serve media files
MEDIA_URL = '/media/'

# Path where media is stored
MEDIA_ROOT = os.path.join(BASE_DIR, 'media/')

'''
MEDIA_URL is the URL that will serve the media files.

During development, it doesn't matter much as long it doesn't conflict with any view of the apps. In production, uploaded files should be served from a different domain such as Amazon S3.

MEDIA_ROOT is the path to the root directory where the files are getting stored.
'''

from django.conf import settings
from django.conf.urls.static import static

urlpatterns = [
    path('admin/', admin.site.urls),
    ...]
if settings.DEBUG:
    urlpatterns += static(settings.MEDIA_URL,
                          document_root=settings.MEDIA_ROOT)
</code>
</pre>
    </div>
    <div class="task">
      <h3>Package Importing...</h3>
      <pre class='language-python'>
<code>
from django.shortcuts import render,HttpResponse,redirect
from django.contrib.auth.models import User
from django.contrib.auth import authenticate,login,logout
from django.contrib import messages
from django.contrib.auth.models import User
from django.utils.timezone import now
timestamp=models.DateTimeField(default=now)
import os
from django.contrib.messages import constants as messages
'blog.apps.BlogConfig',
'django.contrib.humanize',
{{post.content|safe}}
<img src="/media/{{post.img}}" class="card-img" alt="...">

</code>
</pre>
    </div>
    <div class="task">
      <h3>Authentication</h3>
      <pre class='language-python'>
<code>
def handlesignup(request):
  if request.method=="POST":
      username=request.POST['username']
      fname=request.POST['fname']
      lname=request.POST['lname']
      email=request.POST['email']
      pass1=request.POST['pass1']
      pass2=request.POST['pass2']
      #check the authentication
      if len(username)>10:
          messages.error(request,'username must be greater than 10')
          return redirect("home")
      # if not  username.alnum:
      #         #messages.error(request,'username must be greater than 10)
      #     return redirect("home")    
      if pass1 != pass2:
          messages.error(request, 'Password does not match')
          return redirect("home")   
      #create the user
      print(username,fname,lname,pass1)
      myuser=User.objects.create_user(username,email,pass1)
      myuser.first_name=fname
      myuser.last_name=lname
      myuser.save()
      messages.success(request, 'Your account have been successfully created')
      return redirect("home")
  
  else:
      return HttpResponse("ERROR:404")



def handlelogin(request):
  if request.method=="POST":
      username=request.POST['loginusername']
      password=request.POST['pass']
      user=authenticate(username=username,password=password)
      if user is not None:
          login(request,user)
          print("successfully login")
          messages.success(request, 'you have login in the website')
          return redirect("home")
      else:
          print("enter the correct user name and the password")
          messages.error(request, 'Enter the correct username and the password')
  return HttpResponse("Error _404")

def handlelogout(request):
  logout(request)
  print("account is logout successfully")
  messages.success(request, 'Now you are logout successfully')
  return redirect("home")

</code>
</pre>
    </div>
    <div class="task">
      <h3>Searching</h3>
      <pre class='language-python'>
<code>
  def search(request):
    query=request.GET['query']
    allpost=Posts.objects.filter(title__icontains=query)
    params={'allpost':allpost}
    return render(request,'home/search.htm',params)

</code>
</pre>
    </div>
    <div class="task">
      <h3>Authentication</h3>
      <pre class='language-python'>
<code>
class BlogComment(models.Model):
  sno=models.AutoField(primary_key=True)
  comment=models.TextField()
  user=models.ForeignKey(User,on_delete=models.CASCADE)
  post=models.ForeignKey(Posts,on_delete=models.CASCADE)
  parent=models.ForeignKey('self',on_delete=models.CASCADE,null=True)
  timestamp=models.DateTimeField(default=now)
  def __str__(self):
      return self.comment[0:15]+"....."+"by "+self.user.username
</code>
</pre>
    </div>
    <div class="task">
      <h3>Authentication</h3>
      <pre class='language-python'>
<code>
  STATIC_URL = '/static/'
  STATICFILES_DIRS = [
      os.path.join(BASE_DIR,'static'),
  ]
  
  MEDIA_URL='/media/'
  MEDIA_ROOT=os.path.join(BASE_DIR,'media')
  MESSAGE_TAGS = {
      messages.ERROR: 'danger',
  }
  
</code>
</pre>
    </div>
    <div class="task">
      <h3>Authentication</h3>
      <pre class='language-python'>
<code>

</code>
</pre>
    </div>

    

</div>
</div>


</body>

</html>